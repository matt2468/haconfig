<dom-module id='ha-panel-locks'>
    <style include='ha-style'>
    </style>

    <template>
      <app-header-layout has-scrolling-region>
        <app-header fixed>
            <app-toolbar>
                <ha-menu-button narrow='[[narrow]]' show-menu='[[showMenu]]'></ha-menu-button>
                <div main-title>ZWave Locks</div>
            </app-toolbar>
        </app-header>

        <div class='content'>
            <div class='ha-form'>
            <vaadin-combo-box label='Call' items='[[calltypes]]' value='{{calltype}}'></vaadin-combo-box>
            <paper-textarea label='Something' value='{{calltype}}'></paper-textarea>
            <paper-button on-tap='setusercode' raised>Call</paper-button>
            </div>

            <ol>
            <template is='dom-repeat' items='[[locks]]' as='lock'>
                <li>[[lock.entityId]] [[lock.state]]</li>
            </template>
            </ol>
            <ol>
            <template is='dom-repeat' items='[[codes]]' as='code'>
                <li>[[code.entityId]] [[code.state]]</li>
            </template>
            </ol>
        </div>
      </app-header-layout>
    </template>
</dom-module>

<script>
Polymer({
  is: 'ha-panel-locks',
  behaviors: [window.hassBehavior],  // this allows us to use bindNuclear, that was fun to find

  properties: {
    // things that appear in all the other panels 
    hass:     { type: Object },
    panel:    { type: Object },
    narrow:   { type: Boolean, value: false },
    showMenu: { type: Boolean, value: false },

    // generated from data from the backend via magic
    locks: {
      type: Array,
      bindNuclear: function (hass) {
        return [
          hass.entityGetters.entityMap,
          function (map) { return map.valueSeq().filter(function (entity) { return entity.domain == 'lock'}).toArray();
        }];
    }},

    codes: {
      type: Array,
      bindNuclear: function (hass) {
        return [
          hass.entityGetters.entityMap,
          function (map) { return map.valueSeq().filter(function (entity) { return entity.domain == 'usercode'}).toArray();
        }];
    }},

    // Some static bits
    calltypes: { type: Array, value: ['Create New Code', 'Delete a Code', 'Rename a Code'] },
    calltype:  { type: String, value: ''},
  },
  // End of properties

  setusercode: function () {
     alert("setusercode");
     //this.hass.serviceActions.callService('usercode', 'setusercode', serviceData);
  },


});
</script>

